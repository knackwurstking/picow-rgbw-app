var Ct=Object.defineProperty;var Et=(t,e,n)=>e in t?Ct(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var De=(t,e,n)=>(Et(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function V(){}function ce(t,e){for(const n in e)t[n]=e[n];return t}function mt(t){return t()}function et(){return Object.create(null)}function ue(t){t.forEach(mt)}function Ge(t){return typeof t=="function"}function se(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function $t(t){return Object.keys(t).length===0}function Ot(t,e,n,s){if(t){const r=_t(t,e,n,s);return t[0](r)}}function _t(t,e,n,s){return t[1]&&s?ce(n.ctx.slice(),t[1](s(e))):n.ctx}function Pt(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const l=[],o=Math.max(e.dirty.length,r.length);for(let i=0;i<o;i+=1)l[i]=e.dirty[i]|r[i];return l}return e.dirty|r}return e.dirty}function jt(t,e,n,s,r,l){if(r){const o=_t(e,n,s,l);t.p(o,r)}}function Tt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function Pe(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function tt(t){return t??""}function _e(t){return t&&Ge(t.destroy)?t.destroy:V}function f(t,e){t.appendChild(e)}function z(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function Ke(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function je(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t){return document.createTextNode(t)}function j(){return K(" ")}function Ue(){return K("")}function q(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Le(t){return t===""?null:+t}function Lt(t){return Array.from(t.childNodes)}function pe(t,e){e=""+e,t.data!==e&&(t.data=e)}function te(t,e){t.value=e??""}function nt(t,e,n){for(let s=0;s<t.options.length;s+=1){const r=t.options[s];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Mt(t){const e=t.querySelector(":checked");return e&&e.__value}function Ee(t,e,n){t.classList.toggle(e,!!n)}function Nt(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}let Ie;function Me(t){Ie=t}function pt(){if(!Ie)throw new Error("Function called outside component initialization");return Ie}function Bt(t){pt().$$.on_mount.push(t)}function He(){const t=pt();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const l=Nt(e,n,{cancelable:s});return r.slice().forEach(o=>{o.call(t,l)}),!l.defaultPrevented}return!0}}const Ce=[],we=[];let Oe=[];const Je=[],It=Promise.resolve();let We=!1;function Ht(){We||(We=!0,It.then(vt))}function ze(t){Oe.push(t)}function At(t){Je.push(t)}const Fe=new Set;let Se=0;function vt(){if(Se!==0)return;const t=Ie;do{try{for(;Se<Ce.length;){const e=Ce[Se];Se++,Me(e),Rt(e.$$)}}catch(e){throw Ce.length=0,Se=0,e}for(Me(null),Ce.length=0,Se=0;we.length;)we.pop()();for(let e=0;e<Oe.length;e+=1){const n=Oe[e];Fe.has(n)||(Fe.add(n),n())}Oe.length=0}while(Ce.length);for(;Je.length;)Je.pop()();We=!1,Fe.clear(),Me(t)}function Rt(t){if(t.fragment!==null){t.update(),ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ze)}}function qt(t){const e=[],n=[];Oe.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),Oe=e}const qe=new Set;let be;function Ne(){be={r:0,c:[],p:be}}function Be(){be.r||ue(be.c),be=be.p}function P(t,e){t&&t.i&&(qe.delete(t),t.i(e))}function B(t,e,n,s){if(t&&t.o){if(qe.has(t))return;qe.add(t),be.c.push(()=>{qe.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function Te(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ve(t,e){const n={},s={},r={$$scope:1};let l=t.length;for(;l--;){const o=t[l],i=e[l];if(i){for(const c in o)c in i||(s[c]=1);for(const c in i)r[c]||(n[c]=i[c],r[c]=1);t[l]=i}else for(const c in o)r[c]=1}for(const o in s)o in n||(n[o]=void 0);return n}function Xe(t){return typeof t=="object"&&t!==null?t:{}}function zt(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function ne(t){t&&t.c()}function Z(t,e,n){const{fragment:s,after_update:r}=t.$$;s&&s.m(e,n),ze(()=>{const l=t.$$.on_mount.map(mt).filter(Ge);t.$$.on_destroy?t.$$.on_destroy.push(...l):ue(l),t.$$.on_mount=[]}),r.forEach(ze)}function x(t,e){const n=t.$$;n.fragment!==null&&(qt(n.after_update),ue(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Dt(t,e){t.$$.dirty[0]===-1&&(Ce.push(t),Ht(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function oe(t,e,n,s,r,l,o,i=[-1]){const c=Ie;Me(t);const u=t.$$={fragment:null,ctx:[],props:l,update:V,not_equal:r,bound:et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:et(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(w,m,...S)=>{const v=S.length?S[0]:m;return u.ctx&&r(u.ctx[w],u.ctx[w]=v)&&(!u.skip_bound&&u.bound[w]&&u.bound[w](v),d&&Dt(t,w)),m}):[],u.update(),d=!0,ue(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const w=Lt(e.target);u.fragment&&u.fragment.l(w),w.forEach(I)}else u.fragment&&u.fragment.c();e.intro&&P(t.$$.fragment),Z(t,e.target,e.anchor),vt()}Me(c)}class le{constructor(){De(this,"$$");De(this,"$$set")}$destroy(){x(this,1),this.$destroy=V}$on(e,n){if(!Ge(n))return V;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!$t(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ft="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ft);function rt(t){let e,n;return{c(){e=je("title"),n=K(t[0])},m(s,r){z(s,e,r),f(e,n)},p(s,r){r&1&&pe(n,s[0])},d(s){s&&I(e)}}}function Ut(t){let e,n,s,r=t[0]&&rt(t);const l=t[3].default,o=Ot(l,t,t[2],null);return{c(){e=je("svg"),r&&r.c(),n=Ue(),o&&o.c(),a(e,"xmlns","http://www.w3.org/2000/svg"),a(e,"viewBox",t[1]),a(e,"class","svelte-c8tyih")},m(i,c){z(i,e,c),r&&r.m(e,null),f(e,n),o&&o.m(e,null),s=!0},p(i,[c]){i[0]?r?r.p(i,c):(r=rt(i),r.c(),r.m(e,n)):r&&(r.d(1),r=null),o&&o.p&&(!s||c&4)&&jt(o,l,i,i[2],s?Pt(l,i[2],c,null):Tt(i[2]),null),(!s||c&2)&&a(e,"viewBox",i[1])},i(i){s||(P(o,i),s=!0)},o(i){B(o,i),s=!1},d(i){i&&I(e),r&&r.d(),o&&o.d(i)}}}function Jt(t,e,n){let{$$slots:s={},$$scope:r}=e,{title:l=null}=e,{viewBox:o}=e;return t.$$set=i=>{"title"in i&&n(0,l=i.title),"viewBox"in i&&n(1,o=i.viewBox),"$$scope"in i&&n(2,r=i.$$scope)},[l,o,r,s]}class Ye extends le{constructor(e){super(),oe(this,e,Jt,Ut,se,{title:0,viewBox:1})}}function Wt(t){let e;return{c(){e=je("path"),a(e,"d","M413.967 276.8c1.06-6.235 1.06-13.518 1.06-20.8s-1.06-13.518-1.06-20.8l44.667-34.318c4.26-3.118 5.319-8.317 2.13-13.518L418.215 115.6c-2.129-4.164-8.507-6.235-12.767-4.164l-53.186 20.801c-10.638-8.318-23.394-15.601-36.16-20.801l-7.448-55.117c-1.06-4.154-5.319-8.318-10.638-8.318h-85.098c-5.318 0-9.577 4.164-10.637 8.318l-8.508 55.117c-12.767 5.2-24.464 12.482-36.171 20.801l-53.186-20.801c-5.319-2.071-10.638 0-12.767 4.164L49.1 187.365c-2.119 4.153-1.061 10.399 2.129 13.518L96.97 235.2c0 7.282-1.06 13.518-1.06 20.8s1.06 13.518 1.06 20.8l-44.668 34.318c-4.26 3.118-5.318 8.317-2.13 13.518L92.721 396.4c2.13 4.164 8.508 6.235 12.767 4.164l53.187-20.801c10.637 8.318 23.394 15.601 36.16 20.801l8.508 55.117c1.069 5.2 5.318 8.318 10.637 8.318h85.098c5.319 0 9.578-4.164 10.638-8.318l8.518-55.117c12.757-5.2 24.464-12.482 36.16-20.801l53.187 20.801c5.318 2.071 10.637 0 12.767-4.164l42.549-71.765c2.129-4.153 1.06-10.399-2.13-13.518l-46.8-34.317zm-158.499 52c-41.489 0-74.46-32.235-74.46-72.8s32.971-72.8 74.46-72.8 74.461 32.235 74.461 72.8-32.972 72.8-74.461 72.8z")},m(n,s){z(n,e,s)},p:V,d(n){n&&I(e)}}}function Gt(t){let e,n;const s=[{viewBox:"0 0 512 512"},t[0]];let r={$$slots:{default:[Wt]},$$scope:{ctx:t}};for(let l=0;l<s.length;l+=1)r=ce(r,s[l]);return e=new Ye({props:r}),{c(){ne(e.$$.fragment)},m(l,o){Z(e,l,o),n=!0},p(l,[o]){const i=o&1?Ve(s,[s[0],Xe(l[0])]):{};o&2&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function Kt(t,e,n){return t.$$set=s=>{n(0,e=ce(ce({},e),Pe(s)))},e=Pe(e),[e]}class bt extends le{constructor(e){super(),oe(this,e,Kt,Gt,se,{})}}function Vt(t){let e,n,s;return{c(){e=je("path"),n=j(),s=je("path"),a(e,"d","M363 277h-86v86h-42v-86h-86v-42h86v-86h42v86h86v42z"),a(s,"d","M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422c-44.3 0-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256c0-44.3 17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z")},m(r,l){z(r,e,l),z(r,n,l),z(r,s,l)},p:V,d(r){r&&(I(e),I(n),I(s))}}}function Xt(t){let e,n;const s=[{viewBox:"0 0 512 512"},t[0]];let r={$$slots:{default:[Vt]},$$scope:{ctx:t}};for(let l=0;l<s.length;l+=1)r=ce(r,s[l]);return e=new Ye({props:r}),{c(){ne(e.$$.fragment)},m(l,o){Z(e,l,o),n=!0},p(l,[o]){const i=o&1?Ve(s,[s[0],Xe(l[0])]):{};o&2&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function Yt(t,e,n){return t.$$set=s=>{n(0,e=ce(ce({},e),Pe(s)))},e=Pe(e),[e]}class Qt extends le{constructor(e){super(),oe(this,e,Yt,Xt,se,{})}}function Zt(t){let e;return{c(){e=je("path"),a(e,"d","M133.1 128l23.6 290.7c0 16.2 13.1 29.3 29.3 29.3h141c16.2 0 29.3-13.1 29.3-29.3L379.6 128H133.1zm61.6 265L188 160h18.5l6.9 233h-18.7zm70.3 0h-18V160h18v233zm52.3 0h-18.6l6.8-233H324l-6.7 233zM364 92h-36l-26.3-23c-3.7-3.2-8.4-5-13.2-5h-64.8c-4.9 0-9.7 1.8-13.4 5L184 92h-36c-17.6 0-30 8.4-30 26h276c0-17.6-12.4-26-30-26z")},m(n,s){z(n,e,s)},p:V,d(n){n&&I(e)}}}function xt(t){let e,n;const s=[{viewBox:"0 0 512 512"},t[0]];let r={$$slots:{default:[Zt]},$$scope:{ctx:t}};for(let l=0;l<s.length;l+=1)r=ce(r,s[l]);return e=new Ye({props:r}),{c(){ne(e.$$.fragment)},m(l,o){Z(e,l,o),n=!0},p(l,[o]){const i=o&1?Ve(s,[s[0],Xe(l[0])]):{};o&2&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function en(t,e,n){return t.$$set=s=>{n(0,e=ce(ce({},e),Pe(s)))},e=Pe(e),[e]}class tn extends le{constructor(e){super(),oe(this,e,en,xt,se,{})}}function nn(t){let e,n,s,r;return{c(){e=h("div"),a(e,"style",n=`background-color: rgb(${t[0].r*2.55}, ${t[0].g*2.55}, ${t[0].b*2.55});`),a(e,"class","svelte-d1at2g"),Ee(e,"checked",t[1])},m(l,o){z(l,e,o),s||(r=q(e,"click",t[3]),s=!0)},p(l,[o]){o&1&&n!==(n=`background-color: rgb(${l[0].r*2.55}, ${l[0].g*2.55}, ${l[0].b*2.55});`)&&a(e,"style",n),o&2&&Ee(e,"checked",l[1])},i:V,o:V,d(l){l&&I(e),s=!1,r()}}}function rn(t,e,n){const s=He();let{color:r}=e,{checked:l=!1}=e;const o=()=>s("click");return t.$$set=i=>{"color"in i&&n(0,r=i.color),"checked"in i&&n(1,l=i.checked)},[r,l,s,o]}class sn extends le{constructor(e){super(),oe(this,e,rn,nn,se,{color:0,checked:1})}}function st(t,e,n){const s=t.slice();return s[6]=e[n],s}function ot(t){let e,n;function s(){return t[4](t[6])}return e=new sn({props:{checked:t[0]===t[6],color:t[6]}}),e.$on("click",s),{c(){ne(e.$$.fragment)},m(r,l){Z(e,r,l),n=!0},p(r,l){t=r;const o={};l&3&&(o.checked=t[0]===t[6]),l&2&&(o.color=t[6]),e.$set(o)},i(r){n||(P(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function on(t){let e,n,s=Te(t[1]),r=[];for(let o=0;o<s.length;o+=1)r[o]=ot(st(t,s,o));const l=o=>B(r[o],1,1,()=>{r[o]=null});return{c(){e=h("article");for(let o=0;o<r.length;o+=1)r[o].c();a(e,"class","svelte-1pmhuvf")},m(o,i){z(o,e,i);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);n=!0},p(o,[i]){if(i&3){s=Te(o[1]);let c;for(c=0;c<s.length;c+=1){const u=st(o,s,c);r[c]?(r[c].p(u,i),P(r[c],1)):(r[c]=ot(u),r[c].c(),P(r[c],1),r[c].m(e,null))}for(Ne(),c=s.length;c<r.length;c+=1)l(c);Be()}},i(o){if(!n){for(let i=0;i<s.length;i+=1)P(r[i]);n=!0}},o(o){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)B(r[i]);n=!1},d(o){o&&I(e),Ke(r,o)}}}function ln(t,e,n){let s=[],{selected:r=null}=e;function l(){localStorage.setItem("color-storage",JSON.stringify(s))}async function o(u){const d=s;for(let w=0;w<d.length;w++){const m=d[w];if(m.r===u.r&&m.g===u.g&&m.b===u.b&&m.w===u.w)return}n(1,s=[u,...d]),l()}async function i(u){const d=s;for(let w=0;w<d.length;w++){const m=d[w];if(m.r===u.r&&m.g===u.g&&m.b===u.b&&m.w===u.w)return n(1,s=[...d.slice(0,w),...d.slice(w+1)]),i(u)}l()}Bt(()=>{n(1,s=JSON.parse(localStorage.getItem("color-storage")||`[
            { "r": 100, "g": 100, "b": 100, "w": 100 },
            { "r": 100, "g": 100, "b": 0, "w": 0 }
        ]`))});const c=u=>n(0,r=u);return t.$$set=u=>{"selected"in u&&n(0,r=u.selected)},[r,s,o,i,c]}class cn extends le{constructor(e){super(),oe(this,e,ln,on,se,{selected:0,add:2,remove:3})}get add(){return this.$$.ctx[2]}get remove(){return this.$$.ctx[3]}}function un(t){let e,n,s,r,l,o,i,c,u,d,w,m,S,v,F,C,_,b,E,$,y,T,O,H,re,U,D,X,fe,ee;return{c(){e=h("article"),n=h("label"),s=K("Brightness "),r=h("code"),l=K(t[3]),o=j(),i=h("input"),c=j(),u=h("label"),d=K("R "),w=h("code"),m=K(t[0]),S=j(),v=h("input"),F=j(),C=h("label"),_=K("G "),b=h("code"),E=K(t[1]),$=j(),y=h("input"),T=j(),O=h("label"),H=K("B "),re=h("code"),U=K(t[2]),D=j(),X=h("input"),a(i,"name","brightness"),a(i,"type","range"),a(i,"min",t[4]),a(i,"max",t[5]),i.value=t[3],a(n,"for","brightness"),a(v,"name","r"),a(v,"type","range"),a(v,"min",0),a(v,"max",100),a(u,"for","r"),a(y,"name","g"),a(y,"type","range"),a(y,"min",0),a(y,"max",100),a(C,"for","g"),a(X,"name","b"),a(X,"type","range"),a(X,"min",0),a(X,"max",100),a(O,"for","b")},m(J,W){z(J,e,W),f(e,n),f(n,s),f(n,r),f(r,l),f(n,o),f(n,i),f(e,c),f(e,u),f(u,d),f(u,w),f(w,m),f(u,S),f(u,v),te(v,t[0]),f(e,F),f(e,C),f(C,_),f(C,b),f(b,E),f(C,$),f(C,y),te(y,t[1]),f(e,T),f(e,O),f(O,H),f(O,re),f(re,U),f(O,D),f(O,X),te(X,t[2]),fe||(ee=[q(i,"input",t[8]),q(v,"change",t[9]),q(v,"input",t[9]),q(y,"change",t[10]),q(y,"input",t[10]),q(X,"change",t[11]),q(X,"input",t[11])],fe=!0)},p(J,[W]){W&8&&pe(l,J[3]),W&16&&a(i,"min",J[4]),W&32&&a(i,"max",J[5]),W&8&&(i.value=J[3]),W&1&&pe(m,J[0]),W&1&&te(v,J[0]),W&2&&pe(E,J[1]),W&2&&te(y,J[1]),W&4&&pe(U,J[2]),W&4&&te(X,J[2])},i:V,o:V,d(J){J&&I(e),fe=!1,ue(ee)}}}function fn(t,e,n){const s=He();let{brightnessMin:r=1}=e,{brightnessMax:l=100}=e,{r:o=100}=e,{g:i=100}=e,{b:c=100}=e,{brightness:u=Math.min(o,i,c)}=e;function d(_,b,E){n(0,o=_),n(1,i=b),n(2,c=E)}function w(_,b,E){const $=[_,b,E].filter(y=>y>0);n(3,u=Math.min(...$)),s("change",{r:_>=0?_:0,g:b>=0?b:0,b:E>=0?E:0,w:_===b&&_===E?_:0})}function m(_){const b=[o,i,c].filter(T=>T>0),E=Math.min(...b),$=Math.max(...b),y=E-_;if(b.find(T=>T-y>100)){const T=100-$;o>0&&n(0,o+=T),i>0&&n(1,i+=T),c>0&&n(2,c+=T)}else o>0&&n(0,o-=y),i>0&&n(1,i-=y),c>0&&n(2,c-=y);s("change",{r:o>=0?o:0,g:i>=0?i:0,b:c>=0?c:0,w:o===i&&o===c?o:0})}const S=_=>{console.debug("on:input brightness",parseInt(_.currentTarget.value),o,i,c),m(parseInt(_.currentTarget.value))};function v(){o=Le(this.value),n(0,o)}function F(){i=Le(this.value),n(1,i)}function C(){c=Le(this.value),n(2,c)}return t.$$set=_=>{"brightnessMin"in _&&n(4,r=_.brightnessMin),"brightnessMax"in _&&n(5,l=_.brightnessMax),"r"in _&&n(0,o=_.r),"g"in _&&n(1,i=_.g),"b"in _&&n(2,c=_.b),"brightness"in _&&n(3,u=_.brightness)},t.$$.update=()=>{t.$$.dirty&7&&o>=0&&w(o,i,c),t.$$.dirty&7&&i>=0&&w(o,i,c),t.$$.dirty&7&&c>=0&&w(o,i,c)},[o,i,c,u,r,l,m,d,S,v,F,C]}class an extends le{constructor(e){super(),oe(this,e,fn,un,se,{brightnessMin:4,brightnessMax:5,r:0,g:1,b:2,brightness:3,set:7})}get set(){return this.$$.ctx[7]}}function dn(t,e,{duration:n=600,color:s="var(--ripple-color, rgba(255, 255, 255, 0.7))"}={}){const r=t.getBoundingClientRect(),l=Math.max(r.width,r.height),o=l/2,i=`${e.clientX-(r.left+o)}px`,c=`${e.clientY-(r.top+o)}px`,u=document.createElement("span");u.style.width=`${l}px`,u.style.height=`${l}px`,u.style.left=i,u.style.top=c,u.style.position="absolute",u.style.borderRadius="50%",u.style.backgroundColor=`${s}`,t.append(u);const d=u.animate([{transform:"scale(.7)",opacity:.5,filter:"blur(2px)"},{transform:"scale(4)",opacity:0,filter:"blur(5px)"}],n);d.onfinish=()=>u.remove()}function $e({duration:t=600,color:e="var(--ripple-color, rgba(255, 255, 255, 0.7))",usePointer:n=!1}={}){return s=>{const r=l=>dn(s,l,{duration:t,color:e});return n?s.addEventListener("pointerdown",r):s.addEventListener("click",r),{destroy(){n?s.removeEventListener("pointerdown",r):s.removeEventListener("click",r)}}}}function hn(t){let e,n,s,r,l,o,i,c,u,d,w,m,S,v,F,C,_,b,E,$,y,T;return{c(){e=h("dialog"),n=h("form"),s=h("label"),r=h("select"),l=h("option"),o=K("Custom"),c=h("option"),u=K("PicoCSS"),w=j(),m=h("label"),S=K(`(Api) Server Host\r
            `),v=h("input"),F=j(),C=h("label"),_=K(`(Api) Server Port\r
            `),b=h("input"),E=j(),$=h("button"),$.textContent="OK",l.__value="custom",te(l,l.__value),l.selected=i=t[2]==="custom",c.__value="default",te(c,c.__value),c.selected=d=t[2]==="picocss",a(r,"id","themePicker"),a(r,"name","themePicker"),r.required=!0,t[2]===void 0&&ze(()=>t[6].call(r)),a(s,"for","themePicker"),a(v,"id","serverHost"),a(v,"name","serverHost"),a(v,"type","text"),v.required=!0,a(m,"for","serverHost"),a(m,"class","svelte-vdgm1h"),a(b,"id","serverPort"),a(b,"name","serverPort"),a(b,"type","number"),a(b,"min",0),a(b,"max",65535),b.required=!0,a(C,"for","serverPort"),a(C,"class","svelte-vdgm1h"),a($,"type","submit"),a(n,"action","#"),a(n,"class","svelte-vdgm1h"),e.open=t[3]},m(O,H){z(O,e,H),f(e,n),f(n,s),f(s,r),f(r,l),f(l,o),f(r,c),f(c,u),nt(r,t[2],!0),f(n,w),f(n,m),f(m,S),f(m,v),te(v,t[0]),f(n,F),f(n,C),f(C,_),f(C,b),te(b,t[1]),f(n,E),f(n,$),y||(T=[q(r,"change",t[6]),q(v,"input",t[7]),q(b,"input",t[8]),_e(t[4].call(null,$)),q($,"click",t[5])],y=!0)},p(O,[H]){H&4&&i!==(i=O[2]==="custom")&&(l.selected=i),H&4&&d!==(d=O[2]==="picocss")&&(c.selected=d),H&4&&nt(r,O[2]),H&1&&v.value!==O[0]&&te(v,O[0]),H&2&&Le(b.value)!==O[1]&&te(b,O[1]),H&8&&(e.open=O[3])},i:V,o:V,d(O){O&&I(e),y=!1,ue(T)}}}function gn(t,e,n){const s=He(),r=$e({color:"var(--ripple-primary-color)",usePointer:!0});let{serverHost:l}=e,{serverPort:o}=e,{currentTheme:i="custom"}=e,{open:c=!1}=e;function u(){s("submit",{serverHost:l,serverPort:o,currentTheme:i})}function d(){i=Mt(this),n(2,i)}function w(){l=this.value,n(0,l)}function m(){o=Le(this.value),n(1,o)}return t.$$set=S=>{"serverHost"in S&&n(0,l=S.serverHost),"serverPort"in S&&n(1,o=S.serverPort),"currentTheme"in S&&n(2,i=S.currentTheme),"open"in S&&n(3,c=S.open)},[l,o,i,c,r,u,d,w,m]}class mn extends le{constructor(e){super(),oe(this,e,gn,hn,se,{serverHost:0,serverPort:1,currentTheme:2,open:3})}}function _n(t){let e,n,s,r,l,o,i,c;return{c(){e=h("div"),n=h("div"),s=j(),r=h("span"),l=K(t[1]),a(n,"class","background svelte-gavh5t"),a(r,"class","message"),a(e,"class",o=tt(`notification ${t[0]}`)+" svelte-gavh5t")},m(u,d){z(u,e,d),f(e,n),f(e,s),f(e,r),f(r,l),i||(c=q(e,"click",t[3]),i=!0)},p(u,[d]){d&2&&pe(l,u[1]),d&1&&o!==(o=tt(`notification ${u[0]}`)+" svelte-gavh5t")&&a(e,"class",o)},i:V,o:V,d(u){u&&I(e),i=!1,c()}}}function pn(t,e,n){const s=He();let{level:r}=e,{message:l}=e;const o=()=>s("click");return t.$$set=i=>{"level"in i&&n(0,r=i.level),"message"in i&&n(1,l=i.message)},[r,l,s,o]}class vn extends le{constructor(e){super(),oe(this,e,pn,_n,se,{level:0,message:1})}}function lt(t,e,n){const s=t.slice();return s[7]=e[n],s[9]=n,s}function it(t){let e,n;function s(){return t[5](t[9])}return e=new vn({props:{level:t[7].level,message:t[7].message}}),e.$on("click",s),{c(){ne(e.$$.fragment)},m(r,l){Z(e,r,l),n=!0},p(r,l){t=r;const o={};l&1&&(o.level=t[7].level),l&1&&(o.message=t[7].message),e.$set(o)},i(r){n||(P(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function bn(t){let e,n,s=Te(t[0]),r=[];for(let o=0;o<s.length;o+=1)r[o]=it(lt(t,s,o));const l=o=>B(r[o],1,1,()=>{r[o]=null});return{c(){e=h("div");for(let o=0;o<r.length;o+=1)r[o].c();a(e,"class","notify container svelte-z0v3pd")},m(o,i){z(o,e,i);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);t[6](e),n=!0},p(o,[i]){if(i&1){s=Te(o[0]);let c;for(c=0;c<s.length;c+=1){const u=lt(o,s,c);r[c]?(r[c].p(u,i),P(r[c],1)):(r[c]=it(u),r[c].c(),P(r[c],1),r[c].m(e,null))}for(Ne(),c=s.length;c<r.length;c+=1)l(c);Be()}},i(o){if(!n){for(let i=0;i<s.length;i+=1)P(r[i]);n=!0}},o(o){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)B(r[i]);n=!1},d(o){o&&I(e),Ke(r,o),t[6](null)}}}function wn(t,e,n){let s=[];function r(d){n(0,s=[...s,{level:"info",message:d}])}function l(d){n(0,s=[...s,{level:"warning",message:d}])}function o(d){n(0,s=[...s,{level:"error",message:d}])}let i;const c=d=>{n(0,s=[...s.slice(0,d),...s.slice(d+1)])};function u(d){we[d?"unshift":"push"](()=>{i=d,n(1,i)})}return t.$$.update=()=>{t.$$.dirty&1&&s.length&&setTimeout(()=>{n(0,s=[...s.slice(1)])},2500)},[s,i,r,l,o,c,u]}class yn extends le{constructor(e){super(),oe(this,e,wn,bn,se,{info:2,warning:3,error:4})}get info(){return this.$$.ctx[2]}get warning(){return this.$$.ctx[3]}get error(){return this.$$.ctx[4]}}function kn(t){let e,n,s,r,l,o,i,c;return{c(){e=h("dialog"),n=h("form"),s=h("label"),r=h("input"),l=j(),o=h("button"),o.textContent="OK",a(r,"id","name"),a(r,"name","name"),a(r,"type","text"),r.required=!0,a(s,"for","name"),a(o,"type","submit"),a(n,"action","#"),e.open=t[1]},m(u,d){z(u,e,d),f(e,n),f(n,s),f(s,r),te(r,t[0]),f(n,l),f(n,o),i||(c=[q(r,"input",t[4]),_e(t[2].call(null,o)),q(o,"click",t[3])],i=!0)},p(u,[d]){d&1&&r.value!==u[0]&&te(r,u[0]),d&2&&(e.open=u[1])},i:V,o:V,d(u){u&&I(e),i=!1,ue(c)}}}function Sn(t,e,n){const s=He(),r=$e({color:"var(--ripple-primary-color)",usePointer:!0});let{name:l}=e,{open:o=!1}=e;function i(){s("submit",{name:l})}function c(){l=this.value,n(0,l)}return t.$$set=u=>{"name"in u&&n(0,l=u.name),"open"in u&&n(1,o=u.open)},[l,o,r,i,c]}class Cn extends le{constructor(e){super(),oe(this,e,Sn,kn,se,{name:0,open:1})}}class En{constructor(e,n){this.server="",this.setServer(e,n)}setServer(e,n){this.server=`http://${e}:${n}`}async getDevices(){const e=`${this.server}/api/v1/devices`,n=await fetch(e);let s=[];if(n.ok){try{s=await n.json()}catch{throw`Unexpected data from "${e}"`}return s}let r=await n.text();throw r?`Request Error to "${e}" [${n.status}]: ${r}`:`Request Error to "${e}": ${n.status}`}async setColor(e,n){if(Array.isArray(e))if(e.length){if(!e)return}else return;const s={addr:Array.isArray(e)?e:[e],color:n},r=`${this.server}/api/v1/color`,l=await fetch(r,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});if(l.ok)return;let o=await l.text();throw o?`Request Error to "${r}" [${l.status}]: ${o}`:`Request Error to "${r}": ${l.status}`}}class $n{constructor(e,n){this.events={devicesUpdated:"devices updated",deviceError:"device error",deviceOffline:"device offline",deviceOnline:"device online",colorChanged:"color changed",wsClose:"websocket close",wsOpen:"websocket open",wsError:"websocket error"},this.eventTarget=new EventTarget,this.server="",this.serverPath="/api/v1/events",this.webSocket=null,this.setServer(e,n)}_connectWebSocket(){this.webSocket=new WebSocket(this.server),this.webSocket.onopen=()=>{console.debug(`ws: onopen: readyState=${this.webSocket.readyState}`),this.dispatch(this.events.wsOpen)},this.webSocket.onmessage=e=>{const n=JSON.parse(e.data);switch(n.eventName){case this.events.colorChanged:const s=n.data;this.dispatch(this.events.colorChanged,s);break;default:console.error(`Sorry, event "${n.eventName}" not found!`)}},this.webSocket.onclose=e=>{this.dispatch(this.events.wsClose),e.reason?console.debug(`ws: onclose, reconnect in a second... (${e.reason})`):console.debug("ws: onclose, reconnect in a second..."),setTimeout(()=>{console.debug(`ws: onclose: ...try reconnecting to "${this.server}"`),this._connectWebSocket()},1e3)},this.webSocket.onerror=e=>{this.dispatch(this.events.wsError),this.webSocket.close()}}setServer(e,n){this.server=`ws://${e}:${n}${this.serverPath}`,this.webSocket&&this.webSocket.close(),this._connectWebSocket()}dispatch(e,n){if(!Object.values(this.events).includes(e))throw`eventName not found: "${e}"`;this.eventTarget.dispatchEvent(new CustomEvent(e,{detail:n}))}devicesUpdated(e){e&&this.eventTarget.addEventListener(this.events.devicesUpdated,e)}deviceError(e){e&&this.eventTarget.addEventListener(this.events.deviceError,e)}deviceOffline(e){e&&this.eventTarget.addEventListener(this.events.deviceOffline,e)}deviceOnline(e){e&&this.eventTarget.addEventListener(this.events.deviceOnline,e)}colorChanged(e){e&&this.eventTarget.addEventListener(this.events.colorChanged,e)}}function ct(t,e,n){const s=t.slice();return s[39]=e[n],s[40]=e,s[41]=n,s}function ut(t){let e;return{c(){e=h("link"),a(e,"rel","stylesheet"),a(e,"href","/css/themes/custom.min.css")},m(n,s){z(n,e,s)},d(n){n&&I(e)}}}function ft(t){let e;return{c(){e=h("link"),a(e,"rel","stylesheet"),a(e,"href","/css/themes/picocss.min.css")},m(n,s){z(n,e,s)},d(n){n&&I(e)}}}function at(t){let e,n;return e=new mn({props:{open:t[11],serverHost:t[4],serverPort:t[5],currentTheme:t[12]}}),e.$on("submit",t[22]),{c(){ne(e.$$.fragment)},m(s,r){Z(e,s,r),n=!0},p(s,r){const l={};r[0]&2048&&(l.open=s[11]),r[0]&16&&(l.serverHost=s[4]),r[0]&32&&(l.serverPort=s[5]),r[0]&4096&&(l.currentTheme=s[12]),e.$set(l)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){B(e.$$.fragment,s),n=!1},d(s){x(e,s)}}}function dt(t){let e,n;return e=new Cn({props:{open:t[13],name:t[14]}}),e.$on("submit",t[23]),{c(){ne(e.$$.fragment)},m(s,r){Z(e,s,r),n=!0},p(s,r){const l={};r[0]&8192&&(l.open=s[13]),r[0]&16384&&(l.name=s[14]),e.$set(l)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){B(e.$$.fragment,s),n=!1},d(s){x(e,s)}}}function ht(t){let e,n,s,r,l,o,i,c,u=t[39].name+"",d,w,m,S=t[39].data.map(gt).join(", ")+"",v,F,C,_,b,E,$,y,T,O;E=new bt({});function H(...U){return t[24](t[39],t[40],t[41],...U)}function re(){return t[25](t[39])}return{c(){e=h("fieldset"),n=h("div"),s=j(),r=h("div"),r.innerHTML='<div class="online-indicator__inner svelte-14dajwm"></div>',l=j(),o=h("div"),i=h("div"),c=h("b"),d=K(u),w=j(),m=h("code"),v=K(S),F=j(),C=h("div"),_=h("div"),b=h("button"),ne(E.$$.fragment),$=j(),a(n,"class","background svelte-14dajwm"),a(r,"class","online-indicator svelte-14dajwm"),Ee(r,"online",t[2].includes(`${t[39].host}:${t[39].port}`)),a(i,"class","devices-list-item__address svelte-14dajwm"),a(m,"class","devices-list-item__color-preview svelte-14dajwm"),a(o,"class","content svelte-14dajwm"),a(b,"class","secondary outline svelte-14dajwm"),a(_,"class","settings svelte-14dajwm"),a(C,"class","actions svelte-14dajwm"),a(e,"class","devices-list-item svelte-14dajwm"),Ee(e,"checked",t[6].includes(`${t[39].host}:${t[39].port}`))},m(U,D){z(U,e,D),f(e,n),f(e,s),f(e,r),f(e,l),f(e,o),f(o,i),f(i,c),f(c,d),f(o,w),f(o,m),f(m,v),f(e,F),f(e,C),f(C,_),f(_,b),Z(E,b,null),f(e,$),y=!0,T||(O=[_e(t[16].call(null,b)),q(b,"click",H),q(e,"click",re)],T=!0)},p(U,D){t=U,(!y||D[0]&6)&&Ee(r,"online",t[2].includes(`${t[39].host}:${t[39].port}`)),(!y||D[0]&2)&&u!==(u=t[39].name+"")&&pe(d,u),(!y||D[0]&2)&&S!==(S=t[39].data.map(gt).join(", ")+"")&&pe(v,S),(!y||D[0]&66)&&Ee(e,"checked",t[6].includes(`${t[39].host}:${t[39].port}`))},i(U){y||(P(E.$$.fragment,U),y=!0)},o(U){B(E.$$.fragment,U),y=!1},d(U){U&&I(e),x(E),T=!1,ue(O)}}}function On(t){let e,n,s,r,l,o,i,c,u,d,w,m,S,v,F,C,_,b,E,$,y,T,O,H,re,U,D,X,fe,ee,J,W,ie,ae,ye,de,Ae,he,Re,ge,ve,g,L,N=t[12]==="custom"&&ut(),G=t[12]==="picocss"&&ft(),me={};r=new yn({props:me}),t[21](r);let k=t[11]&&at(t),M=t[13]&&dt(t),Y=Te(t[1]),R=[];for(let p=0;p<Y.length;p+=1)R[p]=ht(ct(t,Y,p));const wt=p=>B(R[p],1,1,()=>{R[p]=null});$=new Qt({}),H=new tn({});function yt(p){t[29](p)}let Qe={};t[3]!==void 0&&(Qe.selected=t[3]),D=new cn({props:Qe}),t[28](D),we.push(()=>zt(D,"selected",yt));let kt={};return ee=new an({props:kt}),t[30](ee),ee.$on("change",t[31]),de=new bt({}),{c(){N&&N.c(),e=Ue(),G&&G.c(),n=Ue(),s=j(),ne(r.$$.fragment),l=j(),o=h("main"),k&&k.c(),i=j(),M&&M.c(),c=j(),u=h("section"),d=h("h3"),d.innerHTML="<u>Devices</u>",w=j(),m=h("article");for(let p=0;p<R.length;p+=1)R[p].c();S=j(),v=h("section"),F=h("h3"),F.innerHTML="<u>Control</u>",C=j(),_=h("div"),b=h("button"),E=h("div"),ne($.$$.fragment),y=j(),T=h("button"),O=h("div"),ne(H.$$.fragment),U=j(),ne(D.$$.fragment),fe=j(),ne(ee.$$.fragment),J=j(),W=h("footer"),ie=h("div"),ae=h("button"),ye=h("div"),ne(de.$$.fragment),Ae=j(),he=h("button"),he.textContent="OFF",Re=j(),ge=h("button"),ge.textContent="ON / SET",a(u,"class","devices"),a(E,"class","icon svelte-14dajwm"),a(b,"class","add-item svelte-14dajwm"),a(O,"class","icon svelte-14dajwm"),a(T,"class","outline secondary remove-item svelte-14dajwm"),T.disabled=re=!t[3],a(_,"class","actions svelte-14dajwm"),a(v,"class","control"),a(o,"class","container svelte-14dajwm"),a(ye,"class","icon svelte-14dajwm"),a(ae,"class","contrast svelte-14dajwm"),a(he,"class","secondary svelte-14dajwm"),a(ge,"class","primary svelte-14dajwm"),a(ie,"class","svelte-14dajwm"),a(W,"class","container svelte-14dajwm")},m(p,A){N&&N.m(document.head,null),f(document.head,e),G&&G.m(document.head,null),f(document.head,n),z(p,s,A),Z(r,p,A),z(p,l,A),z(p,o,A),k&&k.m(o,null),f(o,i),M&&M.m(o,null),f(o,c),f(o,u),f(u,d),f(u,w),f(u,m);for(let ke=0;ke<R.length;ke+=1)R[ke]&&R[ke].m(m,null);f(o,S),f(o,v),f(v,F),f(v,C),f(v,_),f(_,b),f(b,E),Z($,E,null),f(_,y),f(_,T),f(T,O),Z(H,O,null),f(v,U),Z(D,v,null),f(v,fe),Z(ee,v,null),z(p,J,A),z(p,W,A),f(W,ie),f(ie,ae),f(ae,ye),Z(de,ye,null),f(ie,Ae),f(ie,he),f(ie,Re),f(ie,ge),ve=!0,g||(L=[_e(t[18].call(null,b)),q(b,"click",t[26]),_e(t[16].call(null,T)),q(T,"click",t[27]),_e(t[17].call(null,ae)),q(ae,"click",t[32]),_e(t[19].call(null,he)),q(he,"click",t[33]),_e(t[18].call(null,ge)),q(ge,"click",t[34])],g=!0)},p(p,A){p[12]==="custom"?N||(N=ut(),N.c(),N.m(e.parentNode,e)):N&&(N.d(1),N=null),p[12]==="picocss"?G||(G=ft(),G.c(),G.m(n.parentNode,n)):G&&(G.d(1),G=null);const ke={};if(r.$set(ke),p[11]?k?(k.p(p,A),A[0]&2048&&P(k,1)):(k=at(p),k.c(),P(k,1),k.m(o,i)):k&&(Ne(),B(k,1,1,()=>{k=null}),Be()),p[13]?M?(M.p(p,A),A[0]&8192&&P(M,1)):(M=dt(p),M.c(),P(M,1),M.m(o,c)):M&&(Ne(),B(M,1,1,()=>{M=null}),Be()),A[0]&57414){Y=Te(p[1]);let Q;for(Q=0;Q<Y.length;Q+=1){const xe=ct(p,Y,Q);R[Q]?(R[Q].p(xe,A),P(R[Q],1)):(R[Q]=ht(xe),R[Q].c(),P(R[Q],1),R[Q].m(m,null))}for(Ne(),Q=Y.length;Q<R.length;Q+=1)wt(Q);Be()}(!ve||A[0]&8&&re!==(re=!p[3]))&&(T.disabled=re);const Ze={};!X&&A[0]&8&&(X=!0,Ze.selected=p[3],At(()=>X=!1)),D.$set(Ze);const St={};ee.$set(St)},i(p){if(!ve){P(r.$$.fragment,p),P(k),P(M);for(let A=0;A<Y.length;A+=1)P(R[A]);P($.$$.fragment,p),P(H.$$.fragment,p),P(D.$$.fragment,p),P(ee.$$.fragment,p),P(de.$$.fragment,p),ve=!0}},o(p){B(r.$$.fragment,p),B(k),B(M),R=R.filter(Boolean);for(let A=0;A<R.length;A+=1)B(R[A]);B($.$$.fragment,p),B(H.$$.fragment,p),B(D.$$.fragment,p),B(ee.$$.fragment,p),B(de.$$.fragment,p),ve=!1},d(p){p&&(I(s),I(l),I(o),I(J),I(W)),N&&N.d(p),I(e),G&&G.d(p),I(n),t[21](null),x(r,p),k&&k.d(),M&&M.d(),Ke(R,p),x($),x(H),t[28](null),x(D),t[30](null),x(ee),x(de),g=!1,ue(L)}}}function Pn(t,e,n){localStorage.setItem(`${t}:${e}`,n||"")}function jn(t,e){return localStorage.getItem(`${t}:${e}`)||`${t}:${e}`}const gt=t=>t.duty.toString();function Tn(t,e,n){const s=$e({usePointer:!0}),r=$e({color:"var(--ripple-contrast-color)",usePointer:!0}),l=$e({color:"var(--ripple-primary-color)",usePointer:!0}),o=$e({color:"var(--ripple-secondary-color)",usePointer:!0});let i,c=[],u=[],d=[],w=!1,m,S,v,F,C=null,_={r:100,g:100,b:100,w:100},b=!1,E,$,y="custom",T=!1,O="",H=null;function re(g){v&&v.set(g.r,g.g,g.b)}async function U(){try{const g=await S.getDevices();Array.isArray(g)?n(1,c=g.map(L=>({...L,name:jn(L.host,L.port)}))):(i.error(`Got unexpected data from the server "${S.server}" (data: ${g})`),n(1,c=[]))}catch(g){i.error(`Get Devices Error: ${g}`)}}async function D(g,L){if(console.debug(`init: host=${g}, port=${L}`),m?m.setServer(g,L):m=new $n(E,$),S){S.setServer(g,L);return}else n(7,S=new En(E,$));m.devicesUpdated(async({detail:k})=>{console.debug(`event: "${m.events.devicesUpdated}": detail=${k}`)}),m.deviceError(({detail:k})=>{i.error(`event: "${m.events.deviceError}": ${k}`)}),m.deviceOnline(({detail:k})=>{console.debug(`event: "${m.events.deviceOnline}": detail=${k}`);const M=c.find(Y=>Y.host===k.host&&Y.port===k.port);M&&(M.offline=!1),n(1,c)}),m.deviceOffline(({detail:k})=>{console.debug(`event: "${m.events.deviceOffline}": detail=${k}`);const M=c.find(Y=>Y.host===k.host&&Y.port===k.port);M&&(M.offline=!0),n(1,c)}),m.colorChanged(({detail:k})=>{console.debug(`event: "${m.events.colorChanged}":`,k);const M=c.find(Y=>Y.host===k.host&&Y.port===k.port);M&&(M.data=k.data,M.offline=k.offline),n(1,c)});let N=!1,G=!1;m.eventTarget.addEventListener(m.events.wsOpen,async()=>{N=!1,G=!1,w||n(20,w=!0),i.info(`Connected to "${m.server}"`);try{await U()}catch(k){console.debug("Fetch devices failed:",k)}});let me=async()=>{w&&n(20,w=!1),N||(i.warning(`Connection to "${m.server} closed."`),N=!0)};m.eventTarget.addEventListener(m.events.wsClose,me),me=async()=>{G||(i.error(`Connection to "${m.server}" failed!`),G=!0)},m.eventTarget.addEventListener(m.events.wsError,me)}function X(g){we[g?"unshift":"push"](()=>{i=g,n(0,i)})}const fe=({detail:g})=>{n(4,E=g.serverHost),n(5,$=g.serverPort),n(12,y=g.currentTheme),localStorage.setItem("config",JSON.stringify({serverHost:E,serverPort:$,currentTheme:y})),n(11,b=!1)},ee=g=>{H(g),n(13,T=!1)},J=(g,L,N,G)=>{G.stopPropagation(),n(14,O=g.name),n(15,H=({detail:me})=>{n(1,L[N].name=me.name||`${g.host}:${g.port}`,c),Pn(g.host,g.port,me.name)}),n(13,T=!0)},W=g=>{const L=`${g.host}:${g.port}`;if(d.includes(L)){const N=d.indexOf(L);n(6,d=[...d.slice(0,N),...d.slice(N+1)])}else d.push(L),n(6,d)},ie=async()=>{F.add(_)},ae=async()=>{F.remove(C)};function ye(g){we[g?"unshift":"push"](()=>{F=g,n(9,F)})}function de(g){C=g,n(3,C)}function Ae(g){we[g?"unshift":"push"](()=>{v=g,n(8,v)})}const he=({detail:g})=>{n(10,_={...g,w:g.r===g.g&&g.r===g.b?g.r:0}),C&&(C.r!==_.r||C.g!==_.g||C.b!==_.b)&&n(3,C=null)},Re=()=>{n(11,b=!b)},ge=async()=>{try{S.setColor(d,{r:0,g:0,b:0,w:0})}catch(g){i.error(g)}},ve=()=>{console.debug(`set color: ${_.r}, ${_.g}, ${_.b}, ${_.w}`);try{S.setColor(d,_)}catch(g){i.error(g)}};return t.$$.update=()=>{if(t.$$.dirty[0]&1&&i){const g=localStorage.getItem("config");if(g)try{const L=JSON.parse(g);n(4,E=L.serverHost),n(5,$=L.serverPort),L.currentTheme&&n(12,y=L.currentTheme)}catch(L){i.warning(`Loading config from localStorage failed: ${L}`)}}t.$$.dirty[0]&1048582&&c&&(w?c.forEach(g=>{const L=`${g.host}:${g.port}`;if(!g.offline&&!u.includes(L))u.push(L);else if(g.offline&&u.includes(L)){const N=u.indexOf(L);n(2,u=[...u.slice(0,N),...u.slice(N+1)])}}):n(2,u=[])),t.$$.dirty[0]&8&&C&&re(C),t.$$.dirty[0]&48&&E&&$&&D(E,$)},[i,c,u,C,E,$,d,S,v,F,_,b,y,T,O,H,s,r,l,o,w,X,fe,ee,J,W,ie,ae,ye,de,Ae,he,Re,ge,ve]}class Ln extends le{constructor(e){super(),oe(this,e,Tn,On,se,{},null,[-1,-1])}}new Ln({target:document.getElementById("app")});
