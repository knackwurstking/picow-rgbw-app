var St=Object.defineProperty;var Ct=(t,e,n)=>e in t?St(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Fe=(t,e,n)=>(Ct(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function V(){}function ce(t,e){for(const n in e)t[n]=e[n];return t}function gt(t){return t()}function xe(){return Object.create(null)}function ue(t){t.forEach(gt)}function mt(t){return typeof t=="function"}function re(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Et(t){return Object.keys(t).length===0}function $t(t,e,n,s){if(t){const r=_t(t,e,n,s);return t[0](r)}}function _t(t,e,n,s){return t[1]&&s?ce(n.ctx.slice(),t[1](s(e))):n.ctx}function Ot(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const l=[],o=Math.max(e.dirty.length,r.length);for(let i=0;i<o;i+=1)l[i]=e.dirty[i]|r[i];return l}return e.dirty|r}return e.dirty}function Tt(t,e,n,s,r,l){if(r){const o=_t(e,n,s,l);t.p(o,r)}}function Lt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function $e(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function et(t){return t??""}function u(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function Ge(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function Oe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function G(t){return document.createTextNode(t)}function $(){return G(" ")}function Ue(){return G("")}function P(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function qe(t){return t===""?null:+t}function qt(t){return Array.from(t.childNodes)}function me(t,e){e=""+e,t.data!==e&&(t.data=e)}function ee(t,e){t.value=e??""}function tt(t,e,n){for(let s=0;s<t.options.length;s+=1){const r=t.options[s];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Pt(t){const e=t.querySelector(":checked");return e&&e.__value}function Ce(t,e,n){t.classList.toggle(e,!!n)}function Mt(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}let Be;function Pe(t){Be=t}function pt(){if(!Be)throw new Error("Function called outside component initialization");return Be}function Nt(t){pt().$$.on_mount.push(t)}function Ie(){const t=pt();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const l=Mt(e,n,{cancelable:s});return r.slice().forEach(o=>{o.call(t,l)}),!l.defaultPrevented}return!0}}const Se=[],be=[];let Ee=[];const Je=[],Bt=Promise.resolve();let We=!1;function It(){We||(We=!0,Bt.then(vt))}function De(t){Ee.push(t)}function Ht(t){Je.push(t)}const Re=new Set;let ke=0;function vt(){if(ke!==0)return;const t=Be;do{try{for(;ke<Se.length;){const e=Se[ke];ke++,Pe(e),At(e.$$)}}catch(e){throw Se.length=0,ke=0,e}for(Pe(null),Se.length=0,ke=0;be.length;)be.pop()();for(let e=0;e<Ee.length;e+=1){const n=Ee[e];Re.has(n)||(Re.add(n),n())}Ee.length=0}while(Se.length);for(;Je.length;)Je.pop()();We=!1,Re.clear(),Pe(t)}function At(t){if(t.fragment!==null){t.update(),ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(De)}}function jt(t){const e=[],n=[];Ee.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),Ee=e}const ze=new Set;let ve;function Me(){ve={r:0,c:[],p:ve}}function Ne(){ve.r||ue(ve.c),ve=ve.p}function E(t,e){t&&t.i&&(ze.delete(t),t.i(e))}function H(t,e,n,s){if(t&&t.o){if(ze.has(t))return;ze.add(t),ve.c.push(()=>{ze.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function Te(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ke(t,e){const n={},s={},r={$$scope:1};let l=t.length;for(;l--;){const o=t[l],i=e[l];if(i){for(const c in o)c in i||(s[c]=1);for(const c in i)r[c]||(n[c]=i[c],r[c]=1);t[l]=i}else for(const c in o)r[c]=1}for(const o in s)o in n||(n[o]=void 0);return n}function Ve(t){return typeof t=="object"&&t!==null?t:{}}function zt(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function te(t){t&&t.c()}function Y(t,e,n){const{fragment:s,after_update:r}=t.$$;s&&s.m(e,n),De(()=>{const l=t.$$.on_mount.map(gt).filter(mt);t.$$.on_destroy?t.$$.on_destroy.push(...l):ue(l),t.$$.on_mount=[]}),r.forEach(De)}function Q(t,e){const n=t.$$;n.fragment!==null&&(jt(n.after_update),ue(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Dt(t,e){t.$$.dirty[0]===-1&&(Se.push(t),It(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function se(t,e,n,s,r,l,o,i=[-1]){const c=Be;Pe(t);const f=t.$$={fragment:null,ctx:[],props:l,update:V,not_equal:r,bound:xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:xe(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};o&&o(f.root);let g=!1;if(f.ctx=n?n(t,e.props||{},(w,m,...O)=>{const v=O.length?O[0]:m;return f.ctx&&r(f.ctx[w],f.ctx[w]=v)&&(!f.skip_bound&&f.bound[w]&&f.bound[w](v),g&&Dt(t,w)),m}):[],f.update(),g=!0,ue(f.before_update),f.fragment=s?s(f.ctx):!1,e.target){if(e.hydrate){const w=qt(e.target);f.fragment&&f.fragment.l(w),w.forEach(A)}else f.fragment&&f.fragment.c();e.intro&&E(t.$$.fragment),Y(t,e.target,e.anchor),vt()}Pe(c)}class oe{constructor(){Fe(this,"$$");Fe(this,"$$set")}$destroy(){Q(this,1),this.$destroy=V}$on(e,n){if(!mt(n))return V;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!Et(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ft="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ft);function nt(t){let e,n;return{c(){e=Oe("title"),n=G(t[0])},m(s,r){R(s,e,r),u(e,n)},p(s,r){r&1&&me(n,s[0])},d(s){s&&A(e)}}}function Rt(t){let e,n,s,r=t[0]&&nt(t);const l=t[3].default,o=$t(l,t,t[2],null);return{c(){e=Oe("svg"),r&&r.c(),n=Ue(),o&&o.c(),a(e,"xmlns","http://www.w3.org/2000/svg"),a(e,"viewBox",t[1]),a(e,"class","svelte-c8tyih")},m(i,c){R(i,e,c),r&&r.m(e,null),u(e,n),o&&o.m(e,null),s=!0},p(i,[c]){i[0]?r?r.p(i,c):(r=nt(i),r.c(),r.m(e,n)):r&&(r.d(1),r=null),o&&o.p&&(!s||c&4)&&Tt(o,l,i,i[2],s?Ot(l,i[2],c,null):Lt(i[2]),null),(!s||c&2)&&a(e,"viewBox",i[1])},i(i){s||(E(o,i),s=!0)},o(i){H(o,i),s=!1},d(i){i&&A(e),r&&r.d(),o&&o.d(i)}}}function Ut(t,e,n){let{$$slots:s={},$$scope:r}=e,{title:l=null}=e,{viewBox:o}=e;return t.$$set=i=>{"title"in i&&n(0,l=i.title),"viewBox"in i&&n(1,o=i.viewBox),"$$scope"in i&&n(2,r=i.$$scope)},[l,o,r,s]}class Xe extends oe{constructor(e){super(),se(this,e,Ut,Rt,re,{title:0,viewBox:1})}}function Jt(t){let e;return{c(){e=Oe("path"),a(e,"d","M413.967 276.8c1.06-6.235 1.06-13.518 1.06-20.8s-1.06-13.518-1.06-20.8l44.667-34.318c4.26-3.118 5.319-8.317 2.13-13.518L418.215 115.6c-2.129-4.164-8.507-6.235-12.767-4.164l-53.186 20.801c-10.638-8.318-23.394-15.601-36.16-20.801l-7.448-55.117c-1.06-4.154-5.319-8.318-10.638-8.318h-85.098c-5.318 0-9.577 4.164-10.637 8.318l-8.508 55.117c-12.767 5.2-24.464 12.482-36.171 20.801l-53.186-20.801c-5.319-2.071-10.638 0-12.767 4.164L49.1 187.365c-2.119 4.153-1.061 10.399 2.129 13.518L96.97 235.2c0 7.282-1.06 13.518-1.06 20.8s1.06 13.518 1.06 20.8l-44.668 34.318c-4.26 3.118-5.318 8.317-2.13 13.518L92.721 396.4c2.13 4.164 8.508 6.235 12.767 4.164l53.187-20.801c10.637 8.318 23.394 15.601 36.16 20.801l8.508 55.117c1.069 5.2 5.318 8.318 10.637 8.318h85.098c5.319 0 9.578-4.164 10.638-8.318l8.518-55.117c12.757-5.2 24.464-12.482 36.16-20.801l53.187 20.801c5.318 2.071 10.637 0 12.767-4.164l42.549-71.765c2.129-4.153 1.06-10.399-2.13-13.518l-46.8-34.317zm-158.499 52c-41.489 0-74.46-32.235-74.46-72.8s32.971-72.8 74.46-72.8 74.461 32.235 74.461 72.8-32.972 72.8-74.461 72.8z")},m(n,s){R(n,e,s)},p:V,d(n){n&&A(e)}}}function Wt(t){let e,n;const s=[{viewBox:"0 0 512 512"},t[0]];let r={$$slots:{default:[Jt]},$$scope:{ctx:t}};for(let l=0;l<s.length;l+=1)r=ce(r,s[l]);return e=new Xe({props:r}),{c(){te(e.$$.fragment)},m(l,o){Y(e,l,o),n=!0},p(l,[o]){const i=o&1?Ke(s,[s[0],Ve(l[0])]):{};o&2&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){H(e.$$.fragment,l),n=!1},d(l){Q(e,l)}}}function Gt(t,e,n){return t.$$set=s=>{n(0,e=ce(ce({},e),$e(s)))},e=$e(e),[e]}class bt extends oe{constructor(e){super(),se(this,e,Gt,Wt,re,{})}}function Kt(t){let e,n,s;return{c(){e=Oe("path"),n=$(),s=Oe("path"),a(e,"d","M363 277h-86v86h-42v-86h-86v-42h86v-86h42v86h86v42z"),a(s,"d","M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422c-44.3 0-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256c0-44.3 17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z")},m(r,l){R(r,e,l),R(r,n,l),R(r,s,l)},p:V,d(r){r&&(A(e),A(n),A(s))}}}function Vt(t){let e,n;const s=[{viewBox:"0 0 512 512"},t[0]];let r={$$slots:{default:[Kt]},$$scope:{ctx:t}};for(let l=0;l<s.length;l+=1)r=ce(r,s[l]);return e=new Xe({props:r}),{c(){te(e.$$.fragment)},m(l,o){Y(e,l,o),n=!0},p(l,[o]){const i=o&1?Ke(s,[s[0],Ve(l[0])]):{};o&2&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){H(e.$$.fragment,l),n=!1},d(l){Q(e,l)}}}function Xt(t,e,n){return t.$$set=s=>{n(0,e=ce(ce({},e),$e(s)))},e=$e(e),[e]}class Yt extends oe{constructor(e){super(),se(this,e,Xt,Vt,re,{})}}function Qt(t){let e;return{c(){e=Oe("path"),a(e,"d","M133.1 128l23.6 290.7c0 16.2 13.1 29.3 29.3 29.3h141c16.2 0 29.3-13.1 29.3-29.3L379.6 128H133.1zm61.6 265L188 160h18.5l6.9 233h-18.7zm70.3 0h-18V160h18v233zm52.3 0h-18.6l6.8-233H324l-6.7 233zM364 92h-36l-26.3-23c-3.7-3.2-8.4-5-13.2-5h-64.8c-4.9 0-9.7 1.8-13.4 5L184 92h-36c-17.6 0-30 8.4-30 26h276c0-17.6-12.4-26-30-26z")},m(n,s){R(n,e,s)},p:V,d(n){n&&A(e)}}}function Zt(t){let e,n;const s=[{viewBox:"0 0 512 512"},t[0]];let r={$$slots:{default:[Qt]},$$scope:{ctx:t}};for(let l=0;l<s.length;l+=1)r=ce(r,s[l]);return e=new Xe({props:r}),{c(){te(e.$$.fragment)},m(l,o){Y(e,l,o),n=!0},p(l,[o]){const i=o&1?Ke(s,[s[0],Ve(l[0])]):{};o&2&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(E(e.$$.fragment,l),n=!0)},o(l){H(e.$$.fragment,l),n=!1},d(l){Q(e,l)}}}function xt(t,e,n){return t.$$set=s=>{n(0,e=ce(ce({},e),$e(s)))},e=$e(e),[e]}class en extends oe{constructor(e){super(),se(this,e,xt,Zt,re,{})}}function tn(t){let e,n,s,r;return{c(){e=h("div"),a(e,"style",n=`background-color: rgb(${t[0].r*2.55}, ${t[0].g*2.55}, ${t[0].b*2.55});`),a(e,"class","svelte-d1at2g"),Ce(e,"checked",t[1])},m(l,o){R(l,e,o),s||(r=P(e,"click",t[3]),s=!0)},p(l,[o]){o&1&&n!==(n=`background-color: rgb(${l[0].r*2.55}, ${l[0].g*2.55}, ${l[0].b*2.55});`)&&a(e,"style",n),o&2&&Ce(e,"checked",l[1])},i:V,o:V,d(l){l&&A(e),s=!1,r()}}}function nn(t,e,n){const s=Ie();let{color:r}=e,{checked:l=!1}=e;const o=()=>s("click");return t.$$set=i=>{"color"in i&&n(0,r=i.color),"checked"in i&&n(1,l=i.checked)},[r,l,s,o]}class rn extends oe{constructor(e){super(),se(this,e,nn,tn,re,{color:0,checked:1})}}function rt(t,e,n){const s=t.slice();return s[6]=e[n],s}function st(t){let e,n;function s(){return t[4](t[6])}return e=new rn({props:{checked:t[0]===t[6],color:t[6]}}),e.$on("click",s),{c(){te(e.$$.fragment)},m(r,l){Y(e,r,l),n=!0},p(r,l){t=r;const o={};l&3&&(o.checked=t[0]===t[6]),l&2&&(o.color=t[6]),e.$set(o)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Q(e,r)}}}function sn(t){let e,n,s=Te(t[1]),r=[];for(let o=0;o<s.length;o+=1)r[o]=st(rt(t,s,o));const l=o=>H(r[o],1,1,()=>{r[o]=null});return{c(){e=h("article");for(let o=0;o<r.length;o+=1)r[o].c();a(e,"class","svelte-1pmhuvf")},m(o,i){R(o,e,i);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);n=!0},p(o,[i]){if(i&3){s=Te(o[1]);let c;for(c=0;c<s.length;c+=1){const f=rt(o,s,c);r[c]?(r[c].p(f,i),E(r[c],1)):(r[c]=st(f),r[c].c(),E(r[c],1),r[c].m(e,null))}for(Me(),c=s.length;c<r.length;c+=1)l(c);Ne()}},i(o){if(!n){for(let i=0;i<s.length;i+=1)E(r[i]);n=!0}},o(o){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)H(r[i]);n=!1},d(o){o&&A(e),Ge(r,o)}}}function on(t,e,n){let s=[],{selected:r=null}=e;function l(){localStorage.setItem("color-storage",JSON.stringify(s))}async function o(f){const g=s;for(let w=0;w<g.length;w++){const m=g[w];if(m.r===f.r&&m.g===f.g&&m.b===f.b&&m.w===f.w)return}n(1,s=[f,...g]),l()}async function i(f){const g=s;for(let w=0;w<g.length;w++){const m=g[w];if(m.r===f.r&&m.g===f.g&&m.b===f.b&&m.w===f.w)return n(1,s=[...g.slice(0,w),...g.slice(w+1)]),i(f)}l()}Nt(()=>{n(1,s=JSON.parse(localStorage.getItem("color-storage")||`[
            { "r": 100, "g": 100, "b": 100, "w": 100 },
            { "r": 100, "g": 100, "b": 0, "w": 0 }
        ]`))});const c=f=>n(0,r=f);return t.$$set=f=>{"selected"in f&&n(0,r=f.selected)},[r,s,o,i,c]}class ln extends oe{constructor(e){super(),se(this,e,on,sn,re,{selected:0,add:2,remove:3})}get add(){return this.$$.ctx[2]}get remove(){return this.$$.ctx[3]}}function cn(t){let e,n,s,r,l,o,i,c,f,g,w,m,O,v,j,S,p,b,T,N,k,q,L,D,ne,F,U,K,de,Z;return{c(){e=h("article"),n=h("label"),s=G("Brightness "),r=h("code"),l=G(t[3]),o=$(),i=h("input"),c=$(),f=h("label"),g=G("R "),w=h("code"),m=G(t[0]),O=$(),v=h("input"),j=$(),S=h("label"),p=G("G "),b=h("code"),T=G(t[1]),N=$(),k=h("input"),q=$(),L=h("label"),D=G("B "),ne=h("code"),F=G(t[2]),U=$(),K=h("input"),a(i,"name","brightness"),a(i,"type","range"),a(i,"min",t[4]),a(i,"max",t[5]),i.value=t[3],a(n,"for","brightness"),a(v,"name","r"),a(v,"type","range"),a(v,"min",0),a(v,"max",100),a(f,"for","r"),a(k,"name","g"),a(k,"type","range"),a(k,"min",0),a(k,"max",100),a(S,"for","g"),a(K,"name","b"),a(K,"type","range"),a(K,"min",0),a(K,"max",100),a(L,"for","b")},m(J,W){R(J,e,W),u(e,n),u(n,s),u(n,r),u(r,l),u(n,o),u(n,i),u(e,c),u(e,f),u(f,g),u(f,w),u(w,m),u(f,O),u(f,v),ee(v,t[0]),u(e,j),u(e,S),u(S,p),u(S,b),u(b,T),u(S,N),u(S,k),ee(k,t[1]),u(e,q),u(e,L),u(L,D),u(L,ne),u(ne,F),u(L,U),u(L,K),ee(K,t[2]),de||(Z=[P(i,"input",t[8]),P(v,"change",t[9]),P(v,"input",t[9]),P(k,"change",t[10]),P(k,"input",t[10]),P(K,"change",t[11]),P(K,"input",t[11])],de=!0)},p(J,[W]){W&8&&me(l,J[3]),W&16&&a(i,"min",J[4]),W&32&&a(i,"max",J[5]),W&8&&(i.value=J[3]),W&1&&me(m,J[0]),W&1&&ee(v,J[0]),W&2&&me(T,J[1]),W&2&&ee(k,J[1]),W&4&&me(F,J[2]),W&4&&ee(K,J[2])},i:V,o:V,d(J){J&&A(e),de=!1,ue(Z)}}}function un(t,e,n){const s=Ie();let{brightnessMin:r=1}=e,{brightnessMax:l=100}=e,{r:o=100}=e,{g:i=100}=e,{b:c=100}=e,{brightness:f=Math.min(o,i,c)}=e;function g(p,b,T){n(0,o=p),n(1,i=b),n(2,c=T)}function w(p,b,T){const N=[p,b,T].filter(k=>k>0);n(3,f=Math.min(...N)),s("change",{r:p>=0?p:0,g:b>=0?b:0,b:T>=0?T:0,w:p===b&&p===T?p:0})}function m(p){const b=[o,i,c].filter(q=>q>0),T=Math.min(...b),N=Math.max(...b),k=T-p;if(b.find(q=>q-k>100)){const q=100-N;o>0&&n(0,o+=q),i>0&&n(1,i+=q),c>0&&n(2,c+=q)}else o>0&&n(0,o-=k),i>0&&n(1,i-=k),c>0&&n(2,c-=k);s("change",{r:o>=0?o:0,g:i>=0?i:0,b:c>=0?c:0,w:o===i&&o===c?o:0})}const O=p=>{console.debug("on:input brightness",parseInt(p.currentTarget.value),o,i,c),m(parseInt(p.currentTarget.value))};function v(){o=qe(this.value),n(0,o)}function j(){i=qe(this.value),n(1,i)}function S(){c=qe(this.value),n(2,c)}return t.$$set=p=>{"brightnessMin"in p&&n(4,r=p.brightnessMin),"brightnessMax"in p&&n(5,l=p.brightnessMax),"r"in p&&n(0,o=p.r),"g"in p&&n(1,i=p.g),"b"in p&&n(2,c=p.b),"brightness"in p&&n(3,f=p.brightness)},t.$$.update=()=>{t.$$.dirty&7&&o>=0&&w(o,i,c),t.$$.dirty&7&&i>=0&&w(o,i,c),t.$$.dirty&7&&c>=0&&w(o,i,c)},[o,i,c,f,r,l,m,g,O,v,j,S]}class fn extends oe{constructor(e){super(),se(this,e,un,cn,re,{brightnessMin:4,brightnessMax:5,r:0,g:1,b:2,brightness:3,set:7})}get set(){return this.$$.ctx[7]}}function an(t){let e,n,s,r,l,o,i,c,f,g,w,m,O,v,j,S,p,b,T,N,k,q;return{c(){e=h("dialog"),n=h("form"),s=h("label"),r=h("select"),l=h("option"),o=G("Custom"),c=h("option"),f=G("PicoCSS"),w=$(),m=h("label"),O=G(`(Api) Server Host\r
            `),v=h("input"),j=$(),S=h("label"),p=G(`(Api) Server Port\r
            `),b=h("input"),T=$(),N=h("button"),N.textContent="OK",l.__value="custom",ee(l,l.__value),l.selected=i=t[2]==="custom",c.__value="default",ee(c,c.__value),c.selected=g=t[2]==="picocss",a(r,"id","themePicker"),a(r,"name","themePicker"),r.required=!0,t[2]===void 0&&De(()=>t[5].call(r)),a(s,"for","themePicker"),a(v,"id","serverHost"),a(v,"name","serverHost"),a(v,"type","text"),v.required=!0,a(m,"for","serverHost"),a(m,"class","svelte-vdgm1h"),a(b,"id","serverPort"),a(b,"name","serverPort"),a(b,"type","number"),a(b,"min",0),a(b,"max",65535),b.required=!0,a(S,"for","serverPort"),a(S,"class","svelte-vdgm1h"),a(N,"type","submit"),a(n,"action","#"),a(n,"class","svelte-vdgm1h"),e.open=t[3]},m(L,D){R(L,e,D),u(e,n),u(n,s),u(s,r),u(r,l),u(l,o),u(r,c),u(c,f),tt(r,t[2],!0),u(n,w),u(n,m),u(m,O),u(m,v),ee(v,t[0]),u(n,j),u(n,S),u(S,p),u(S,b),ee(b,t[1]),u(n,T),u(n,N),k||(q=[P(r,"change",t[5]),P(v,"input",t[6]),P(b,"input",t[7]),P(N,"click",t[4])],k=!0)},p(L,[D]){D&4&&i!==(i=L[2]==="custom")&&(l.selected=i),D&4&&g!==(g=L[2]==="picocss")&&(c.selected=g),D&4&&tt(r,L[2]),D&1&&v.value!==L[0]&&ee(v,L[0]),D&2&&qe(b.value)!==L[1]&&ee(b,L[1]),D&8&&(e.open=L[3])},i:V,o:V,d(L){L&&A(e),k=!1,ue(q)}}}function dn(t,e,n){const s=Ie();let{serverHost:r}=e,{serverPort:l}=e,{currentTheme:o="custom"}=e,{open:i=!1}=e;function c(){s("submit",{serverHost:r,serverPort:l,currentTheme:o})}function f(){o=Pt(this),n(2,o)}function g(){r=this.value,n(0,r)}function w(){l=qe(this.value),n(1,l)}return t.$$set=m=>{"serverHost"in m&&n(0,r=m.serverHost),"serverPort"in m&&n(1,l=m.serverPort),"currentTheme"in m&&n(2,o=m.currentTheme),"open"in m&&n(3,i=m.open)},[r,l,o,i,c,f,g,w]}class hn extends oe{constructor(e){super(),se(this,e,dn,an,re,{serverHost:0,serverPort:1,currentTheme:2,open:3})}}function gn(t){let e,n,s,r,l,o,i,c;return{c(){e=h("div"),n=h("div"),s=$(),r=h("span"),l=G(t[1]),a(n,"class","background svelte-gavh5t"),a(r,"class","message"),a(e,"class",o=et(`notification ${t[0]}`)+" svelte-gavh5t")},m(f,g){R(f,e,g),u(e,n),u(e,s),u(e,r),u(r,l),i||(c=P(e,"click",t[3]),i=!0)},p(f,[g]){g&2&&me(l,f[1]),g&1&&o!==(o=et(`notification ${f[0]}`)+" svelte-gavh5t")&&a(e,"class",o)},i:V,o:V,d(f){f&&A(e),i=!1,c()}}}function mn(t,e,n){const s=Ie();let{level:r}=e,{message:l}=e;const o=()=>s("click");return t.$$set=i=>{"level"in i&&n(0,r=i.level),"message"in i&&n(1,l=i.message)},[r,l,s,o]}class _n extends oe{constructor(e){super(),se(this,e,mn,gn,re,{level:0,message:1})}}function ot(t,e,n){const s=t.slice();return s[7]=e[n],s[9]=n,s}function lt(t){let e,n;function s(){return t[5](t[9])}return e=new _n({props:{level:t[7].level,message:t[7].message}}),e.$on("click",s),{c(){te(e.$$.fragment)},m(r,l){Y(e,r,l),n=!0},p(r,l){t=r;const o={};l&1&&(o.level=t[7].level),l&1&&(o.message=t[7].message),e.$set(o)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){Q(e,r)}}}function pn(t){let e,n,s=Te(t[0]),r=[];for(let o=0;o<s.length;o+=1)r[o]=lt(ot(t,s,o));const l=o=>H(r[o],1,1,()=>{r[o]=null});return{c(){e=h("div");for(let o=0;o<r.length;o+=1)r[o].c();a(e,"class","notify container svelte-z0v3pd")},m(o,i){R(o,e,i);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);t[6](e),n=!0},p(o,[i]){if(i&1){s=Te(o[0]);let c;for(c=0;c<s.length;c+=1){const f=ot(o,s,c);r[c]?(r[c].p(f,i),E(r[c],1)):(r[c]=lt(f),r[c].c(),E(r[c],1),r[c].m(e,null))}for(Me(),c=s.length;c<r.length;c+=1)l(c);Ne()}},i(o){if(!n){for(let i=0;i<s.length;i+=1)E(r[i]);n=!0}},o(o){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)H(r[i]);n=!1},d(o){o&&A(e),Ge(r,o),t[6](null)}}}function vn(t,e,n){let s=[];function r(g){n(0,s=[...s,{level:"info",message:g}])}function l(g){n(0,s=[...s,{level:"warning",message:g}])}function o(g){n(0,s=[...s,{level:"error",message:g}])}let i;const c=g=>{n(0,s=[...s.slice(0,g),...s.slice(g+1)])};function f(g){be[g?"unshift":"push"](()=>{i=g,n(1,i)})}return t.$$.update=()=>{t.$$.dirty&1&&s.length&&setTimeout(()=>{n(0,s=[...s.slice(1)])},2500)},[s,i,r,l,o,c,f]}class bn extends oe{constructor(e){super(),se(this,e,vn,pn,re,{info:2,warning:3,error:4})}get info(){return this.$$.ctx[2]}get warning(){return this.$$.ctx[3]}get error(){return this.$$.ctx[4]}}function wn(t){let e,n,s,r,l,o,i,c;return{c(){e=h("dialog"),n=h("form"),s=h("label"),r=h("input"),l=$(),o=h("button"),o.textContent="OK",a(r,"id","name"),a(r,"name","name"),a(r,"type","text"),r.required=!0,a(s,"for","name"),a(o,"type","submit"),a(n,"action","#"),e.open=t[1]},m(f,g){R(f,e,g),u(e,n),u(n,s),u(s,r),ee(r,t[0]),u(n,l),u(n,o),i||(c=[P(r,"input",t[3]),P(o,"click",t[2])],i=!0)},p(f,[g]){g&1&&r.value!==f[0]&&ee(r,f[0]),g&2&&(e.open=f[1])},i:V,o:V,d(f){f&&A(e),i=!1,ue(c)}}}function yn(t,e,n){const s=Ie();let{name:r}=e,{open:l=!1}=e;function o(){s("submit",{name:r})}function i(){r=this.value,n(0,r)}return t.$$set=c=>{"name"in c&&n(0,r=c.name),"open"in c&&n(1,l=c.open)},[r,l,o,i]}class kn extends oe{constructor(e){super(),se(this,e,yn,wn,re,{name:0,open:1})}}function pe(t,e,n=null){const s=e.getBoundingClientRect();let r=t.clientX-s.x,l=t.clientY-s.y;n!=null&&n.startFromCenter&&(r=s.width/2,l=s.height/2);const o=document.createElement("span"),i=Math.max(s.width,s.height),c=i/2;o.style.width=o.style.height=`${i}px`,o.style.left=`${r-c}px`,o.style.top=`${l-c}px`,e.classList.contains("primary")?o.classList.add("primary"):e.classList.contains("secondary")?o.classList.add("secondary"):e.classList.contains("contrast")&&o.classList.add("contrast"),n!=null&&n.reverse&&o.classList.add("ripple__reverse"),o.classList.add("ripple"),Sn(e),e.append(o)}function Sn(t){for(const e of t.getElementsByClassName("ripple"))e.remove()}class Cn{constructor(e,n){this.server="",this.setServer(e,n)}setServer(e,n){this.server=`http://${e}:${n}`}async getDevices(){const e=`${this.server}/api/v1/devices`,n=await fetch(e);let s=[];if(n.ok){try{s=await n.json()}catch{throw`Unexpected data from "${e}"`}return s}let r=await n.text();throw r?`Request Error to "${e}" [${n.status}]: ${r}`:`Request Error to "${e}": ${n.status}`}async setColor(e,n){if(Array.isArray(e))if(e.length){if(!e)return}else return;const s={addr:Array.isArray(e)?e:[e],color:n},r=`${this.server}/api/v1/color`,l=await fetch(r,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});if(l.ok)return;let o=await l.text();throw o?`Request Error to "${r}" [${l.status}]: ${o}`:`Request Error to "${r}": ${l.status}`}}class En{constructor(e,n){this.events={devicesUpdated:"devices updated",deviceError:"device error",deviceOffline:"device offline",deviceOnline:"device online",colorChanged:"color changed",wsClose:"websocket close",wsOpen:"websocket open",wsError:"websocket error"},this.eventTarget=new EventTarget,this.server="",this.serverPath="/api/v1/events",this.webSocket=null,this.setServer(e,n)}_connectWebSocket(){this.webSocket=new WebSocket(this.server),this.webSocket.onopen=()=>{console.debug(`ws: onopen: readyState=${this.webSocket.readyState}`),this.dispatch(this.events.wsOpen)},this.webSocket.onmessage=e=>{const n=JSON.parse(e.data);switch(n.eventName){case this.events.colorChanged:const s=n.data;this.dispatch(this.events.colorChanged,s);break;default:console.error(`Sorry, event "${n.eventName}" not found!`)}},this.webSocket.onclose=e=>{this.dispatch(this.events.wsClose),e.reason?console.debug(`ws: onclose, reconnect in a second... (${e.reason})`):console.debug("ws: onclose, reconnect in a second..."),setTimeout(()=>{console.debug(`ws: onclose: ...try reconnecting to "${this.server}"`),this._connectWebSocket()},1e3)},this.webSocket.onerror=e=>{this.dispatch(this.events.wsError),this.webSocket.close()}}setServer(e,n){this.server=`ws://${e}:${n}${this.serverPath}`,this.webSocket&&this.webSocket.close(),this._connectWebSocket()}dispatch(e,n){if(!Object.values(this.events).includes(e))throw`eventName not found: "${e}"`;this.eventTarget.dispatchEvent(new CustomEvent(e,{detail:n}))}devicesUpdated(e){e&&this.eventTarget.addEventListener(this.events.devicesUpdated,e)}deviceError(e){e&&this.eventTarget.addEventListener(this.events.deviceError,e)}deviceOffline(e){e&&this.eventTarget.addEventListener(this.events.deviceOffline,e)}deviceOnline(e){e&&this.eventTarget.addEventListener(this.events.deviceOnline,e)}colorChanged(e){e&&this.eventTarget.addEventListener(this.events.colorChanged,e)}}function it(t,e,n){const s=t.slice();return s[41]=e[n],s[42]=e,s[43]=n,s}function ct(t){let e;return{c(){e=h("link"),a(e,"rel","stylesheet"),a(e,"href","/css/themes/custom.min.css")},m(n,s){R(n,e,s)},d(n){n&&A(e)}}}function ut(t){let e;return{c(){e=h("link"),a(e,"rel","stylesheet"),a(e,"href","/css/themes/picocss.min.css")},m(n,s){R(n,e,s)},d(n){n&&A(e)}}}function ft(t){let e,n;return e=new hn({props:{open:t[11],serverHost:t[4],serverPort:t[5],currentTheme:t[12]}}),e.$on("submit",t[18]),{c(){te(e.$$.fragment)},m(s,r){Y(e,s,r),n=!0},p(s,r){const l={};r[0]&2048&&(l.open=s[11]),r[0]&16&&(l.serverHost=s[4]),r[0]&32&&(l.serverPort=s[5]),r[0]&4096&&(l.currentTheme=s[12]),e.$set(l)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function at(t){let e,n;return e=new kn({props:{open:t[13],name:t[14]}}),e.$on("submit",t[19]),{c(){te(e.$$.fragment)},m(s,r){Y(e,s,r),n=!0},p(s,r){const l={};r[0]&8192&&(l.open=s[13]),r[0]&16384&&(l.name=s[14]),e.$set(l)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function dt(t){let e,n,s,r,l,o,i,c,f=t[41].name+"",g,w,m,O=t[41].data.map(ht).join(", ")+"",v,j,S,p,b,T,N,k,q,L;T=new bt({});function D(...F){return t[21](t[41],t[42],t[43],...F)}function ne(...F){return t[22](t[41],...F)}return{c(){e=h("fieldset"),n=h("div"),s=$(),r=h("div"),r.innerHTML='<div class="online-indicator__inner svelte-oqo6rx"></div>',l=$(),o=h("div"),i=h("div"),c=h("b"),g=G(f),w=$(),m=h("code"),v=G(O),j=$(),S=h("div"),p=h("div"),b=h("button"),te(T.$$.fragment),N=$(),a(n,"class","background svelte-oqo6rx"),a(r,"class","online-indicator svelte-oqo6rx"),Ce(r,"online",t[2].includes(`${t[41].host}:${t[41].port}`)),a(i,"class","devices-list-item__address svelte-oqo6rx"),a(m,"class","devices-list-item__color-preview svelte-oqo6rx"),a(o,"class","content svelte-oqo6rx"),a(b,"class","secondary outline svelte-oqo6rx"),a(p,"class","settings svelte-oqo6rx"),a(S,"class","actions svelte-oqo6rx"),a(e,"class","devices-list-item primary svelte-oqo6rx"),Ce(e,"checked",t[6].includes(`${t[41].host}:${t[41].port}`))},m(F,U){R(F,e,U),u(e,n),u(e,s),u(e,r),u(e,l),u(e,o),u(o,i),u(i,c),u(c,g),u(o,w),u(o,m),u(m,v),u(e,j),u(e,S),u(S,p),u(p,b),Y(T,b,null),u(e,N),k=!0,q||(L=[P(b,"pointerdown",t[20]),P(b,"click",D),P(e,"click",ne)],q=!0)},p(F,U){t=F,(!k||U[0]&6)&&Ce(r,"online",t[2].includes(`${t[41].host}:${t[41].port}`)),(!k||U[0]&2)&&f!==(f=t[41].name+"")&&me(g,f),(!k||U[0]&2)&&O!==(O=t[41].data.map(ht).join(", ")+"")&&me(v,O),(!k||U[0]&66)&&Ce(e,"checked",t[6].includes(`${t[41].host}:${t[41].port}`))},i(F){k||(E(T.$$.fragment,F),k=!0)},o(F){H(T.$$.fragment,F),k=!1},d(F){F&&A(e),Q(T),q=!1,ue(L)}}}function $n(t){let e,n,s,r,l,o,i,c,f,g,w,m,O,v,j,S,p,b,T,N,k,q,L,D,ne,F,U,K,de,Z,J,W,le,he,we,ge,He,fe,Ae,ae,_e,Le,je,d=t[12]==="custom"&&ct(),y=t[12]==="picocss"&&ut(),x={};r=new bn({props:x}),t[17](r);let M=t[11]&&ft(t),I=t[13]&&at(t),B=Te(t[1]),C=[];for(let _=0;_<B.length;_+=1)C[_]=dt(it(t,B,_));const ie=_=>H(C[_],1,1,()=>{C[_]=null});N=new Yt({}),D=new en({});function wt(_){t[28](_)}let Ye={};t[3]!==void 0&&(Ye.selected=t[3]),U=new ln({props:Ye}),t[27](U),be.push(()=>zt(U,"selected",wt));let yt={};return Z=new fn({props:yt}),t[29](Z),Z.$on("change",t[30]),ge=new bt({}),{c(){d&&d.c(),e=Ue(),y&&y.c(),n=Ue(),s=$(),te(r.$$.fragment),l=$(),o=h("main"),M&&M.c(),i=$(),I&&I.c(),c=$(),f=h("section"),g=h("h3"),g.innerHTML="<u>Devices</u>",w=$(),m=h("article");for(let _=0;_<C.length;_+=1)C[_].c();O=$(),v=h("section"),j=h("h3"),j.innerHTML="<u>Control</u>",S=$(),p=h("div"),b=h("button"),T=h("div"),te(N.$$.fragment),k=$(),q=h("button"),L=h("div"),te(D.$$.fragment),F=$(),te(U.$$.fragment),de=$(),te(Z.$$.fragment),J=$(),W=h("footer"),le=h("div"),he=h("button"),we=h("div"),te(ge.$$.fragment),He=$(),fe=h("button"),fe.textContent="OFF",Ae=$(),ae=h("button"),ae.textContent="ON / SET",a(f,"class","devices"),a(T,"class","icon svelte-oqo6rx"),a(b,"class","add-item primary svelte-oqo6rx"),a(L,"class","icon svelte-oqo6rx"),a(q,"class","outline secondary remove-item svelte-oqo6rx"),q.disabled=ne=!t[3],a(p,"class","actions svelte-oqo6rx"),a(v,"class","control"),a(o,"class","container svelte-oqo6rx"),a(we,"class","icon svelte-oqo6rx"),a(he,"class","contrast svelte-oqo6rx"),a(fe,"class","secondary svelte-oqo6rx"),a(fe,"style",`
                width: 50%;
                margin: 0;
                border-radius: 0;
                box-shadow: none;
            `),a(ae,"class","primary svelte-oqo6rx"),a(ae,"style",`
                width: 50%;
                margin: 0;
                border-bottom-left-radius: 0;
                border-top-left-radius: 0;
                box-shadow: none;
            `),a(le,"class","svelte-oqo6rx"),a(W,"class","container svelte-oqo6rx")},m(_,z){d&&d.m(document.head,null),u(document.head,e),y&&y.m(document.head,null),u(document.head,n),R(_,s,z),Y(r,_,z),R(_,l,z),R(_,o,z),M&&M.m(o,null),u(o,i),I&&I.m(o,null),u(o,c),u(o,f),u(f,g),u(f,w),u(f,m);for(let ye=0;ye<C.length;ye+=1)C[ye]&&C[ye].m(m,null);u(o,O),u(o,v),u(v,j),u(v,S),u(v,p),u(p,b),u(b,T),Y(N,T,null),u(p,k),u(p,q),u(q,L),Y(D,L,null),u(v,F),Y(U,v,null),u(v,de),Y(Z,v,null),R(_,J,z),R(_,W,z),u(W,le),u(le,he),u(he,we),Y(ge,we,null),u(le,He),u(le,fe),u(le,Ae),u(le,ae),_e=!0,Le||(je=[P(b,"pointerdown",t[23]),P(b,"click",t[24]),P(q,"pointerdown",t[25]),P(q,"click",t[26]),P(he,"pointerdown",t[31]),P(he,"click",t[32]),P(fe,"pointerdown",t[33]),P(fe,"click",t[34]),P(ae,"pointerdown",t[35]),P(ae,"click",t[36])],Le=!0)},p(_,z){_[12]==="custom"?d||(d=ct(),d.c(),d.m(e.parentNode,e)):d&&(d.d(1),d=null),_[12]==="picocss"?y||(y=ut(),y.c(),y.m(n.parentNode,n)):y&&(y.d(1),y=null);const ye={};if(r.$set(ye),_[11]?M?(M.p(_,z),z[0]&2048&&E(M,1)):(M=ft(_),M.c(),E(M,1),M.m(o,i)):M&&(Me(),H(M,1,1,()=>{M=null}),Ne()),_[13]?I?(I.p(_,z),z[0]&8192&&E(I,1)):(I=at(_),I.c(),E(I,1),I.m(o,c)):I&&(Me(),H(I,1,1,()=>{I=null}),Ne()),z[0]&57414){B=Te(_[1]);let X;for(X=0;X<B.length;X+=1){const Ze=it(_,B,X);C[X]?(C[X].p(Ze,z),E(C[X],1)):(C[X]=dt(Ze),C[X].c(),E(C[X],1),C[X].m(m,null))}for(Me(),X=B.length;X<C.length;X+=1)ie(X);Ne()}(!_e||z[0]&8&&ne!==(ne=!_[3]))&&(q.disabled=ne);const Qe={};!K&&z[0]&8&&(K=!0,Qe.selected=_[3],Ht(()=>K=!1)),U.$set(Qe);const kt={};Z.$set(kt)},i(_){if(!_e){E(r.$$.fragment,_),E(M),E(I);for(let z=0;z<B.length;z+=1)E(C[z]);E(N.$$.fragment,_),E(D.$$.fragment,_),E(U.$$.fragment,_),E(Z.$$.fragment,_),E(ge.$$.fragment,_),_e=!0}},o(_){H(r.$$.fragment,_),H(M),H(I),C=C.filter(Boolean);for(let z=0;z<C.length;z+=1)H(C[z]);H(N.$$.fragment,_),H(D.$$.fragment,_),H(U.$$.fragment,_),H(Z.$$.fragment,_),H(ge.$$.fragment,_),_e=!1},d(_){_&&(A(s),A(l),A(o),A(J),A(W)),d&&d.d(_),A(e),y&&y.d(_),A(n),t[17](null),Q(r,_),M&&M.d(),I&&I.d(),Ge(C,_),Q(N),Q(D),t[27](null),Q(U),t[29](null),Q(Z),Q(ge),Le=!1,ue(je)}}}function On(t,e,n){localStorage.setItem(`${t}:${e}`,n||"")}function Tn(t,e){return localStorage.getItem(`${t}:${e}`)||`${t}:${e}`}const ht=t=>t.duty.toString();function Ln(t,e,n){let s,r=[],l=[],o=[],i=!1,c,f,g,w,m=null,O={r:100,g:100,b:100,w:100},v=!1,j,S,p="custom",b=!1,T="",N=null;function k(d){g&&g.set(d.r,d.g,d.b)}async function q(){try{const d=await f.getDevices();Array.isArray(d)?n(1,r=d.map(y=>({...y,name:Tn(y.host,y.port)}))):(s.error(`Got unexpected data from the server "${f.server}" (data: ${d})`),n(1,r=[]))}catch(d){s.error(`Get Devices Error: ${d}`)}}async function L(d,y){if(console.debug(`init: host=${d}, port=${y}`),c?c.setServer(d,y):c=new En(j,S),f){f.setServer(d,y);return}else n(7,f=new Cn(j,S));c.devicesUpdated(async({detail:B})=>{console.debug(`event: "${c.events.devicesUpdated}": detail=${B}`)}),c.deviceError(({detail:B})=>{s.error(`event: "${c.events.deviceError}": ${B}`)}),c.deviceOnline(({detail:B})=>{console.debug(`event: "${c.events.deviceOnline}": detail=${B}`);const C=r.find(ie=>ie.host===B.host&&ie.port===B.port);C&&(C.offline=!1),n(1,r)}),c.deviceOffline(({detail:B})=>{console.debug(`event: "${c.events.deviceOffline}": detail=${B}`);const C=r.find(ie=>ie.host===B.host&&ie.port===B.port);C&&(C.offline=!0),n(1,r)}),c.colorChanged(({detail:B})=>{console.debug(`event: "${c.events.colorChanged}":`,B);const C=r.find(ie=>ie.host===B.host&&ie.port===B.port);C&&(C.data=B.data),n(1,r)});let x=!1,M=!1;c.eventTarget.addEventListener(c.events.wsOpen,async()=>{x=!1,M=!1,i||n(16,i=!0),s.info(`Connected to "${c.server}"`);try{await q()}catch(B){console.debug("Fetch devices failed:",B)}});let I=async()=>{i&&n(16,i=!1),x||(s.warning(`Connection to "${c.server} closed."`),x=!0)};c.eventTarget.addEventListener(c.events.wsClose,I),I=async()=>{M||(s.error(`Connection to "${c.server}" failed!`),M=!0)},c.eventTarget.addEventListener(c.events.wsError,I)}function D(d){be[d?"unshift":"push"](()=>{s=d,n(0,s)})}const ne=({detail:d})=>{n(4,j=d.serverHost),n(5,S=d.serverPort),n(12,p=d.currentTheme),localStorage.setItem("config",JSON.stringify({serverHost:j,serverPort:S,currentTheme:p})),n(11,v=!1)},F=d=>{N(d),n(13,b=!1)},U=d=>pe(d,d.currentTarget),K=(d,y,x,M)=>{M.stopPropagation(),n(14,T=d.name),n(15,N=({detail:I})=>{n(1,y[x].name=I.name||`${d.host}:${d.port}`,r),On(d.host,d.port,I.name)}),n(13,b=!0)},de=(d,y)=>{pe(y,y.currentTarget,{reverse:y.currentTarget.classList.contains("checked")});const x=`${d.host}:${d.port}`;if(o.includes(x)){const M=o.indexOf(x);n(6,o=[...o.slice(0,M),...o.slice(M+1)])}else o.push(x),n(6,o)},Z=d=>pe(d,d.currentTarget),J=async d=>{w.add(O)},W=d=>pe(d,d.currentTarget),le=async d=>{w.remove(m)};function he(d){be[d?"unshift":"push"](()=>{w=d,n(9,w)})}function we(d){m=d,n(3,m)}function ge(d){be[d?"unshift":"push"](()=>{g=d,n(8,g)})}const He=({detail:d})=>{n(10,O={...d,w:d.r===d.g&&d.r===d.b?d.r:0}),m&&(m.r!==O.r||m.g!==O.g||m.b!==O.b)&&n(3,m=null)},fe=d=>pe(d,d.currentTarget),Ae=d=>{n(11,v=!v)},ae=d=>pe(d,d.currentTarget),_e=async d=>{try{f.setColor(o,{r:0,g:0,b:0,w:0})}catch(y){s.error(y)}},Le=d=>pe(d,d.currentTarget),je=d=>{console.debug(`set color: ${O.r}, ${O.g}, ${O.b}, ${O.w}`);try{f.setColor(o,O)}catch(y){s.error(y)}};return t.$$.update=()=>{if(t.$$.dirty[0]&1&&s){const d=localStorage.getItem("config");if(d)try{const y=JSON.parse(d);n(4,j=y.serverHost),n(5,S=y.serverPort),y.currentTheme&&n(12,p=y.currentTheme)}catch(y){s.warning(`Loading config from localStorage failed: ${y}`)}}t.$$.dirty[0]&65542&&r&&(i?r.forEach(d=>{const y=`${d.host}:${d.port}`;if(!d.offline&&!l.includes(y))l.push(y);else if(d.offline&&l.includes(y)){const x=l.indexOf(y);n(2,l=[...l.slice(0,x),...l.slice(x+1)])}}):n(2,l=[])),t.$$.dirty[0]&8&&m&&k(m),t.$$.dirty[0]&48&&j&&S&&L(j,S)},[s,r,l,m,j,S,o,f,g,w,O,v,p,b,T,N,i,D,ne,F,U,K,de,Z,J,W,le,he,we,ge,He,fe,Ae,ae,_e,Le,je]}class qn extends oe{constructor(e){super(),se(this,e,Ln,$n,re,{},null,[-1,-1])}}new qn({target:document.getElementById("app")});
